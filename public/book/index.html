<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lapa Casa Hostel - Reservas</title>
  <style>
    /* ... (misma hoja de estilos que ya tienes) ... */
  </style>
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <header>
    <h1 data-i18n="title">Lapa Casa Hostel ‚Äì Reservas</h1>
    <p class="muted" data-i18n="subtitle">Eleg√≠ fechas y cantidad. Luego seleccion√° camas espec√≠ficas (literas triples).</p>
  </header>

  <main class="row">
    <!-- (Secciones 1 y 2 id√©nticas a tu versi√≥n actual) -->

    <section id="formCard" class="card" style="display:none">
      <h2 data-i18n="step3">3) Datos para confirmar</h2>
      <form id="reserva-form">
        <!-- (Campos nombre/email/tel√©fono/fechas iguales) -->

        <!-- üîπ LGPD/GDPR: consentimiento -->
        <label style="margin-top:8px">
          <input type="checkbox" id="consentChk" />
          <span class="muted" data-i18n="consent">Acepto recibir comunicaciones y la pol√≠tica de privacidad.</span>
        </label>

        <div class="grid grid-3" style="margin-top:10px">
          <!-- (Tarjetas MP/Stripe/Simular id√©nticas) -->
        </div>

        <div class="actions" style="margin-top:12px">
          <span class="muted">Estado pago: <span id="payState" class="highlight">pendiente</span></span>
          <button type="submit" id="submitBtn" class="btn" disabled>Confirmar reserva</button>
        </div>
      </form>
    </section>
  </main>

  <footer>
    <p class="muted">&copy; 2025 Lapa Casa Hostel ¬∑ Santa Teresa, R√≠o de Janeiro</p>
  </footer>

  <div id="toast"></div>

  <script>
    // ... (MISMA CONFIG Y L√ìGICA QUE YA TIENES) ...

    // üîπ Bloquear submit sin consentimiento
    document.getElementById('reserva-form').addEventListener('submit', async (e)=>{
      e.preventDefault();
      if (!document.getElementById('consentChk').checked) { alert('Debes aceptar la pol√≠tica de privacidad.'); return; }
      const ok = (payStateEl.textContent || '').toLowerCase().includes('aprob') || window.__simApproved;
      if(!ok){ alert('Necesit√°s completar el pago o usar Simular pago aprobado.'); return; }
      try{
        const r = await fetch(HOLDS_CONFIRM_ENDPOINT,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ holdId: currentHoldId, status:'paid' }) });
        const j = await r.json(); if(!r.ok || !j.ok) throw new Error(j.error || 'No se pudo confirmar HOLD');
        toast('‚úÖ Reserva confirmada'); alert("‚úÖ Reserva registrada.");
      }catch(e){ console.error(e); alert('Error confirmando reserva: ' + e.message); }
    });

    // üîπ Diccionario simple (si un d√≠a quieres activar)
    const I18N = {
      es:{ title:"Lapa Casa Hostel ‚Äì Reservas", subtitle:"Eleg√≠ fechas y cantidad. Luego seleccion√° camas espec√≠ficas (literas triples).", step3:"3) Datos para confirmar", consent:"Acepto recibir comunicaciones y la pol√≠tica de privacidad." },
      pt:{ title:"Lapa Casa Hostel ‚Äì Reservas", subtitle:"Escolha datas e quantidade. Depois selecione camas espec√≠ficas (beliches triplas).", step3:"3) Dados para confirmar", consent:"Aceito receber comunica√ß√µes e a pol√≠tica de privacidade." },
      en:{ title:"Lapa Casa Hostel ‚Äì Bookings", subtitle:"Choose dates and quantity, then select specific beds (triple bunks).", step3:"3) Details to confirm", consent:"I accept communications and the privacy policy." }
    };
    function setLang(lang='es'){ const dict=I18N[lang]||I18N.es; document.querySelectorAll("[data-i18n]").forEach(n=>{ const k=n.getAttribute("data-i18n"); if(dict[k]) n.textContent=dict[k]; }); }
    // setLang('es'); // deja 'es' por defecto
  </script>
</body>
</html>
