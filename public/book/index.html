<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lapa Casa Hostel - Reservas</title>
  <style>
    :root { --gap:12px }
    *{box-sizing:border-box} body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;margin:0;padding:16px;color:#222}
    .row{max-width:1080px;margin:0 auto;display:grid;gap:var(--gap)} .card{border:1px solid #e5e7eb;border-radius:12px;padding:14px}
    .grid{display:grid;gap:10px} .grid-2{grid-template-columns:repeat(2,minmax(260px,1fr))} .grid-4{grid-template-columns:repeat(4,minmax(180px,1fr))}
    @media(max-width:720px){.grid-2,.grid-4{grid-template-columns:1fr}}
    label{display:block;font-size:14px;margin-bottom:6px;color:#374151}
    input[type="date"],input[type="number"]{width:100%;padding:10px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px}
    .ctr{display:flex;align-items:center;gap:6px}
    .ctr button{padding:6px 10px;border:0;border-radius:8px;background:#f59e0b;color:#fff;font-weight:700;cursor:pointer}
    .btn{background:#f59e0b;color:#fff;border:0;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    .muted{color:#6b7280;font-size:14px}
  </style>
</head>
<body>
  <header>
    <h1>Lapa Casa Hostel – Reservas</h1>
    <p class="muted">Elegí fechas y cantidad. Luego seleccioná camas.</p>
  </header>

  <main class="row">
    <section class="card">
      <h2>1) Fechas y cantidad</h2>
      <div class="grid grid-2">
        <div>
          <label>Check-in</label>
          <input id="dateIn" type="date" />
        </div>
        <div>
          <label>Check-out</label>
          <input id="dateOut" type="date" />
        </div>
      </div>

      <div class="grid grid-4" style="margin-top:10px">
        <div>
          <label>Hombres</label>
          <div class="ctr">
            <button type="button" id="menMinus">−</button>
            <input id="men" type="number" min="0" max="38" value="0" inputmode="numeric" />
            <button type="button" id="menPlus">+</button>
          </div>
        </div>
        <div>
          <label>Mujeres</label>
          <div class="ctr">
            <button type="button" id="womenMinus">−</button>
            <input id="women" type="number" min="0" max="38" value="0" inputmode="numeric" />
            <button type="button" id="womenPlus">+</button>
          </div>
        </div>
        <div class="muted" style="display:flex;align-items:end">Capacidad total: 38</div>
        <div style="display:flex;justify-content:end;align-items:end">
          <button id="checkAvail" class="btn">Ver disponibilidad</button>
        </div>
      </div>
      <div id="checkMsg" class="muted" style="margin-top:6px"></div>
    </section>
  </main>

  <script>
    // ——— INIT FECHAS
    (function(){
      const today=new Date().toISOString().slice(0,10);
      const tmr=new Date(Date.now()+86400000).toISOString().slice(0,10);
      const di=document.getElementById('dateIn'), do_=document.getElementById('dateOut');
      di.min=today; do_.min=tmr; if(!di.value) di.value=today; if(!do_.value||do_.value<=di.value) do_.value=tmr;
    })();

    // ——— CONTADORES (FIJO: listeners + clamped set)
    document.addEventListener('DOMContentLoaded', () => {
      const men = document.getElementById('men');
      const women = document.getElementById('women');

      function clampInput(input, v){
        const min = Number(input.min || 0);
        const max = Number(input.max || 9999);
        const n = Math.min(max, Math.max(min, Number.isFinite(v)? v : 0));
        input.value = String(n);
        input.dispatchEvent(new Event('input', { bubbles:true })); // por si otro código escucha
      }
      function step(input, delta){
        const cur = Number(input.value || 0);
        clampInput(input, cur + delta);
      }

      document.getElementById('menMinus').addEventListener('click', () => step(men, -1));
      document.getElementById('menPlus').addEventListener('click',  () => step(men, +1));
      document.getElementById('womenMinus').addEventListener('click',() => step(women, -1));
      document.getElementById('womenPlus').addEventListener('click', () => step(women, +1));

      // también validar escritura manual
      men.addEventListener('change', () => clampInput(men, Number(men.value)));
      women.addEventListener('change', () => clampInput(women, Number(women.value)));

      // marca de vida para consola
      window.__bookCountersReady = true;
    });

    // ——— TEST QUICK (opcional)
    // En consola: __bookCountersReady && (menPlus.click(), document.getElementById('men').value)
  </script>
</body>
</html>
